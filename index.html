<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Puppet - LLM-Driven Marionettes</title>
    <script>
      // Handle GitHub Pages 404 redirect: fix ?/sim back to /sim (or /puppet/sim when under /puppet/)
      (function() {
        const search = window.location.search;
        // 404.html redirects to ?/path (search is "/sim" or "/path&other=params"); take path only
        if (!search || search.length < 2 || search.charAt(1) !== '/') return;
        const redirectPath = search.slice(1).split('&')[0];
        let path = redirectPath.replace(/~and~/g, '&').replace(/~slash~/g, '/');
        if (!path.startsWith('/')) path = '/' + path;
        // Preserve base path so we get /puppet/sim not /sim when served from /puppet/
        const base = window.location.pathname.split('/').filter(Boolean)[0] === 'puppet' ? '/puppet' : '';
        const fullPath = base + path + window.location.hash;
        window.history.replaceState({}, '', fullPath);
      })();
    </script>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
